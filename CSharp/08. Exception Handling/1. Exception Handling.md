# Introduction to Exception Handling

Exception is an unexpected error that occurs at runtime (when an application is running). Exceptions are *thrown* by code that encounters an error and *caught* by code that can correct the error. Once an exception is thrown, it propagates up the call stack until a catch statement for the exception is found. Uncaught exceptions are handled by a generic exception handler provided by the system that displays a dialog box.

## Overview

- Use a `try` block around the statements that might throw exceptions.
- Once an exception occurs in the try block, the flow of control jumps to the first associated `catch` that is present anywhere in the `call stack`.
- If no exception handler for a given exception is present, the program stops executing with an error message.
- A catch block can define an exception `variable`, you can use it to obtain more information about the type of exception that occurred.
- Code in a `finally` block is executed even if an exception is thrown. Use a finally block to release resources, for example to close any streams or files that were opened in the try block.
- A `try` block requires one or more associated `catch blocks`, or a `finally block`, or both.
- Exceptions can be explicitly generated by a program by using the throw keyword.
- Exception objects contain detailed information about the error, such as the state of the call stack and a text description of the error.
- Do not catch an exception unless you can handle it and leave the application in a known state. If you catch `System.Exception`, rethrow it using the `throw` keyword at the end of the catch block.

Example:

```csharp
class ExceptionTest
{
    static double SafeDivision(double x, double y)
    {
        if (y == 0)
            throw new System.DivideByZeroException();
        return x / y;
    }
    static void Main()
    {
        // Input for test purposes. Change the values to see
        // exception handling behavior.
        double a = 98, b = 0;
        double result = 0;

        try
        {
            result = SafeDivision(a, b);
            Console.WriteLine("{0} divided by {1} = {2}", a, b, result);
        }
        catch (DivideByZeroException e)
        {
            Console.WriteLine("Attempted divide by zero.");
        }
    }
}
```

## Common exceptions in .NET

The following is a list of some common .NET exceptions that may occur at runtime.

- **System.Exception**, is either thrown by a system or a running application to report an error.
- **InvalidOperationException**, is thrown when the state of an object cannot invoke a method or execute an expression.
- **ArgumentException**, is thrown when a method is invoked and one of its parameters doesn’t meet the specification of a parameter.
- **ArgumentNullException**, is thrown when a method is invoked and one of its paremeter arguments is null.
- **ArgumentOutOfRangeException**, is thrown when the value of an argument is outside the range of values as defined by the type of the arguments of the invoked method.
- **NullReferenceException**, is thrown when you try to use a reference which is not initialized, or try to access a member of a type which is not initialized in memory.
- **IndexOutOfRangeException**, is thrown when an index of an array tries to access something which is outside of the array’s range.
- **StackOverflowException**, is thrown when the Stack has too many nested methods and it cannot add more methods to execute it.
- **OutOfMemoryException**, is thrown when there is not enough memory to run a program.
- **ArithmeticException**, is thrown when there is an error in an arithmetic operation.
- **DivideByZeroException**, is thrown when there is an attempt to divide an integral or decimal value with zero.
- **OverflowException**, is thrown when an arithmetic operation returns a value that is outside the range of the data type.
- **IOException**, is thrown when there is an error in an IO operation.
- **DirectoryNotFoundException**, is thrown when there is an attempt to access a directory that is not found in the system.
- **FileNotFoundException**, is thrown when there is an attempt to access a file  that is not found in the system.
- **SqlException**, is thrown when an sql server returns a warning or error.
