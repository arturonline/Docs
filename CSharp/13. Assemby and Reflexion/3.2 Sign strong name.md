# Sign an Assembly with a Strong Name

A strong named assembly is generated by using the private key that corresponds to the public key distributed with the assembly, and the assembly itself. The assembly includes the assembly manifest, which contains the names and hashes of all the files that make up the assembly. Assemblies that have the same strong name should be identical.

There are a number of ways to sign an assembly with a strong name:

1. By using the Signing tab in a project's Properties dialog box in **Visual Studio**. This is the easiest and most convenient way to sign an assembly with a strong name.
2. By using the **Assembly Linker** (Al.exe) to link a .NET Framework code module (a .netmodule file) with a key file.
3. By using **assembly attributes** to insert the strong name information into your code. You can use either the AssemblyKeyFileAttribute or the AssemblyKeyNameAttribute attribute, depending on where the key file to be used is located.
4. By using **compiler** options.

## Step #1:  Generating a key pair

The first step you have to take is to generate a key pair. A key pair is usually a file with an `.snk` extension that contains your public/private key information.

When using the developer command prompt, you can run the following command to
generate a new key pair file:

```bash
sn -k myKey.snk
```

An easier way is to use Visual Studio to generate the key pair file for you. You can open the
*property page* of the *project* you want to sign and then navigate to the **Signing tab**

## Step #2: Sign the Assembly

There are a number of ways to sign an assembly with a strong name:

### by using Visual Studio

1. In Solution Explorer, open the shortcut menu for the project, and then choose Properties.
2. Choose the Signing tab.
3. Select the Sign the assembly box.
4. In the **Choose a strong name key file** box, choose `<Browse…>`, and then navigate to the key file. To create a new key file, choose `<New…>` and enter its name in the **Create Strong Name Key** dialog box.

### by using the Assembly Linker

At the Developer Command Prompt for Visual Studio, type the following command:

```bash
al /out:<assemblyName> <moduleName> /keyfile:<keyfileName>

# al /out:Client.exe Client.netmodule /keyfile:mykey.snk
```

where:

* **assemblyName**: The name of the strongly signed assembly (a .dll or .exe file) that Assembly Linker will emit.
* **moduleName**: The name of a .NET Framework code module (a .netmodule file) that includes one or more types. You can create a .netmodule file by compiling your code with the `/target:module` switch in C# or Visual Basic.
* **keyfileName**: The name of the container or file that contains the key pair. Assembly Linker interprets a relative path in relationship to the current directory.

The following example signs the assembly MyAssembly.dll with a strong name by using the key file sgKey.snk.

```bash
al /out:MyAssembly.dll MyModule.netmodule /keyfile:sgKey.snk
```

### by using the compiler

Compile your source code file or files with the `/keyfile` or `/delaysign` compiler option in C# and Visual Basic, or the `/KEYFILE` or `/DELAYSIGN` linker option in C++. After the option name, add a colon and the name of the key file. When using command-line compilers, you can copy the key file to the directory that contains your source code files.

The following example uses the C# compiler and signs the assembly `UtilityLibrary.dll` with a strong name by using the key file `sgKey.snk`.

```bash
csc /t:library UtilityLibrary.cs /keyfile:sgKey.snk
```

### by using attributes

Add the `System.Reflection.AssemblyKeyFileAttribute` or `AssemblyKeyNameAttribute` attribute to your source code file, and specify the name of the file or container that contains the key pair to use when signing the assembly with a strong name.

Compile the source code file normally.

The following example uses the `AssemblyKeyFileAttribute` attribute with a key file called `keyfile.snk`, which is located in the directory where the assembly is compiled.

```bash
[assembly:AssemblyKeyFileAttribute("keyfile.snk")]
```
